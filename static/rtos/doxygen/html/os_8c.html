<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RTOS: os.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>os.c File Reference</h1>A Real Time Operating System. <a href="#_details">More...</a>
<p>
<code>#include &lt;avr/io.h&gt;</code><br>
<code>#include &lt;avr/interrupt.h&gt;</code><br>
<code>#include &quot;<a class="el" href="os_8h-source.html">os.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="kernel_8h-source.html">kernel.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="error__code_8h-source.html">error_code.h</a>&quot;</code><br>

<p>
<a href="os_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#c8ed78dfc7cf1438e51909e988a8e6aa">SAVE_CTX_TOP</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#dadefdf0cfb4066c6439cd200093c456">STACK_SREG_SET_I_BIT</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#9250d18ad0a0ff5171eed2dc5f4e18d4">SAVE_CTX_BOTTOM</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#d70a92eee8278b45f6aad877e23e0d3f">SAVE_CTX</a>()&nbsp;&nbsp;&nbsp;SAVE_CTX_TOP();SAVE_CTX_BOTTOM();</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Push all the registers and SREG onto the stack.  <a href="#d70a92eee8278b45f6aad877e23e0d3f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#a48fc0927da8c8abbe88e67573b389c9">RESTORE_CTX</a>()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pop all registers and the status register.  <a href="#a48fc0927da8c8abbe88e67573b389c9"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#e66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">main function provided by user application. The first task to run.  <a href="#e66f6b31b5ad750f1fe042a706a4e3d4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#098a24a5becc67a653b60f01926b2898">kernel_main_loop</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The heart of the RTOS, the main loop where the kernel is entered and exited.  <a href="#098a24a5becc67a653b60f01926b2898"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#e36f6c57ffcef772c6470d9d4ceb025d">kernel_dispatch</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The second part of the scheduler.  <a href="#e36f6c57ffcef772c6470d9d4ceb025d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#e51f9c8001c0e6454f7a7c181a7b3245">kernel_handle_request</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The first part of the scheduler.  <a href="#e51f9c8001c0e6454f7a7c181a7b3245"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#a6b069f80475f50ef2be4a19420c7b47">exit_kernel</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The idle task does nothing but busy loop.  <a href="#a6b069f80475f50ef2be4a19420c7b47"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#2d87a3737418f0617068390ff7dd1dcf">enter_kernel</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">All system calls eventually enter here.  <a href="#2d87a3737418f0617068390ff7dd1dcf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#a5bea28826fceb06503c295132d2ac03">TIMER1_COMPA_vect</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The interrupt handler for output compare interrupts on Timer 1.  <a href="#a5bea28826fceb06503c295132d2ac03"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#ce2fc879e222274a165878f5053a8988">kernel_create_task</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Kernel function to create a new task.  <a href="#ce2fc879e222274a165878f5053a8988"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#fb716ddb79e9881c5eba30329f8264c4">kernel_terminate_task</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Kernel function to destroy the current task.  <a href="#fb716ddb79e9881c5eba30329f8264c4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#09e8daa4fe831768a1dad2d422f37894">kernel_event_wait</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Kernel function to place current task in a waiting queue.  <a href="#09e8daa4fe831768a1dad2d422f37894"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#bd9a901ea488c09d06d6a348b146fe23">kernel_event_signal</a> (uint8_t is_broadcast, uint8_t and_next)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Kernel function to signal waiting processes.  <a href="#bd9a901ea488c09d06d6a348b146fe23"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#fe6cd6483e8fcf82ae45b1999c5a151d">enqueue</a> (<a class="el" href="structqueue__t.html">queue_t</a> *queue_ptr, <a class="el" href="structtd__struct.html">task_descriptor_t</a> *task_to_add)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a task the head of the queue.  <a href="#fe6cd6483e8fcf82ae45b1999c5a151d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structtd__struct.html">task_descriptor_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#8243495fd897e6eb3ef8cbe714a1093c">dequeue</a> (<a class="el" href="structqueue__t.html">queue_t</a> *queue_ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pops head of queue and returns it.  <a href="#8243495fd897e6eb3ef8cbe714a1093c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#02d27e5cd408a84f50b1f9ed744cddff">kernel_update_ticker</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update the current time.  <a href="#02d27e5cd408a84f50b1f9ed744cddff"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#a12b1f12fa139bad5bf756c84472ef9e">check_PPP_names</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Validate the PPP array.  <a href="#a12b1f12fa139bad5bf756c84472ef9e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#280149a9407c6504ce0af541351561db">OS_Init</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup the RTOS and create <a class="el" href="os_8c.html#e66f6b31b5ad750f1fe042a706a4e3d4">main()</a> as the first SYSTEM level task.  <a href="#280149a9407c6504ce0af541351561db"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#fef307955fe9d6b19dbbebc25f603bd2">_delay_25ms</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delay function adapted from &lt;util/delay.h&gt;.  <a href="#fef307955fe9d6b19dbbebc25f603bd2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#b5747390a8be675282cb93e5198bd085">OS_Abort</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Abort the execution of this RTOS due to an unrecoverable erorr.  <a href="#b5747390a8be675282cb93e5198bd085"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#d26f7e7c3185a703e89e97547747b03e">Task_Create</a> (void(*f)(void), int arg, unsigned int level, unsigned int <a class="el" href="crt0_8S.html#5f372556aff410aa1f0ca41b8348b03c">name</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#5a9b72d0dadaea32fec8d4ff1c0eafa4">Task_Next</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The calling task gives up its share of the processor voluntarily.  <a href="#5a9b72d0dadaea32fec8d4ff1c0eafa4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#266ddbe2a3ded7e68eaa0d68a4047387">Task_Terminate</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The calling task terminates itself.  <a href="#266ddbe2a3ded7e68eaa0d68a4047387"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#dc48a5ac983c4656508f39c0ee65283f">Task_GetArg</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the assigned parameter.  <a href="#dc48a5ac983c4656508f39c0ee65283f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#852c4f8ed9198c7c996cc5e9ce7f1f2b">Event_Init</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize a new, non-NULL Event descriptor.  <a href="#852c4f8ed9198c7c996cc5e9ce7f1f2b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#e279428ffa0e59261a01899cea931503">Event_Wait</a> (<a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a> *e)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait for the next occurrence of a signal on <em>e</em>. The calling process always blocks.  <a href="#e279428ffa0e59261a01899cea931503"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#39210e081be158dab105c68cb85585cd">Event_Signal</a> (<a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a> *e)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Resume a <b>single</b> waiting task on <em>e</em>. It is a <em>no-op</em> if there is no waiting process.  <a href="#39210e081be158dab105c68cb85585cd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#93f9686857f1f8cc4fe1585df3de4874">Event_Broadcast</a> (<a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a> *e)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Resume <b>ALL</b> waiting tasks on <em>e</em>. It is a <em>no-op</em> if there is no waiting process.  <a href="#93f9686857f1f8cc4fe1585df3de4874"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#899044f5840427560c88d0d6e8944629">Signal_And_Next</a> (<a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a> *e)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Resume a waiting task on <em>e</em> and at the same time relinquish the processor.  <a href="#899044f5840427560c88d0d6e8944629"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#8530ed5f351b8835f3b060407bd68625">Broadcast_And_Next</a> (<a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a> *e)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Resume <b>ALL</b> waiting tasks on <em>e</em> and at the same time relinquish the processor.  <a href="#8530ed5f351b8835f3b060407bd68625"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#9139cb65cf60e47afed151765972c100">PPP</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#6370d00b2f49ebb4a69edf643003ada2">PT</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structtd__struct.html">task_descriptor_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#d53910befa64f9fa9ac90742277eb632">cur_task</a> = NULL</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static volatile uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#3635891a0df95d8303c390b1fd456d38">kernel_sp</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structtd__struct.html">task_descriptor_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#b1eedd52cbbcef76a30062d2a4feb5af">task_desc</a> [MAXPROCESS+1]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structtd__struct.html">task_descriptor_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#24065d53ee779976130183b845f205f6">idle_task</a> = &amp;<a class="el" href="os_8c.html#b1eedd52cbbcef76a30062d2a4feb5af">task_desc</a>[MAXPROCESS]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static volatile <a class="el" href="kernel_8h.html#e7246a4cf8c61132898e7e1f8bbccdd2">kernel_request_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#3759ee308f2020aedf4d900692d665ab">kernel_request</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static volatile <a class="el" href="structcreate__args__t.html">create_args_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#279e8f10fed5e4683c919a0f8e48fb3c">kernel_request_create_args</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static volatile int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#cda7cbfa16e2932f4e0b18eb8b5c75fb">kernel_request_retval</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static volatile <a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#522fa71eb2fa5969150232c9cd94ccd9">kernel_request_event_ptr</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structqueue__t.html">queue_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#903de02b3a408ff431279493daf607e4">dead_pool_queue</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#b3dfc0c82749f2167aaf34c0e0216f41">num_events_created</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structqueue__t.html">queue_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#ebe9cc55f5a66e137a9e4935db8176ad">rr_queue</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structqueue__t.html">queue_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#541c08f13ce7088718c32da660763bb7">system_queue</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structqueue__t.html">queue_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#704e958e4af3a92ed5257f96c63b18d6">event_queue</a> [MAXEVENT]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#a056dcd9e780b161c0bf3c479f9a096a">ticks_remaining</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#66d6e3319239a985804ed1da4043160d">slot_task_finished</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#9917d89ff4b22aa58bdaccd40d82cbc4">slot_name_index</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="structtd__struct.html">task_descriptor_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#2f75d159fcf8aad0c906c4f8d3b42d8b">name_to_task_ptr</a> [MAXNAME+1]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#1053a341fba5dbdf070d86fc9385995c">name_in_PPP</a> [MAXNAME+1]</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint8_t volatile&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="os_8c.html#05bcfca90a408dadfc62f30b63eeb0b3">error_msg</a> = ERR_RUN_1_USER_CALLED_OS_ABORT</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A Real Time Operating System. 
<p>
Our implementation of the operating system described by Mantis Cheng in <a class="el" href="os_8h.html">os.h</a>.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Scott Craig <p>
Justin Tanner </dd></dl>

<p>
Definition in file <a class="el" href="os_8c-source.html">os.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="c8ed78dfc7cf1438e51909e988a8e6aa"></a><!-- doxytag: member="os.c::SAVE_CTX_TOP" ref="c8ed78dfc7cf1438e51909e988a8e6aa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAVE_CTX_TOP          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keyword">asm</span> <span class="keyword">volatile</span> (\
    <span class="stringliteral">"push   r31             \n\t"</span>\
    <span class="stringliteral">"in     r31,__SREG__    \n\t"</span>\
    <span class="stringliteral">"cli                    \n\t"</span>::);
</pre></div>It is important to keep the order of context saving and restoring exactly in reverse. Also, when a new task is created, it is important to initialize its "initial" context in the same order as a saved context.<p>
Save r31 and SREG on stack, disable interrupts, then save the rest of the registers on the stack. In the locations this macro is used, the interrupts need to be disabled, or they already are disabled. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00367">367</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="dadefdf0cfb4066c6439cd200093c456"></a><!-- doxytag: member="os.c::STACK_SREG_SET_I_BIT" ref="dadefdf0cfb4066c6439cd200093c456" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STACK_SREG_SET_I_BIT          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keyword">asm</span> <span class="keyword">volatile</span> (\
    <span class="stringliteral">"ori    r31, 0x80        \n\t"</span>::);
</pre></div>
<p>
Definition at line <a class="el" href="os_8c-source.html#l00372">372</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="9250d18ad0a0ff5171eed2dc5f4e18d4"></a><!-- doxytag: member="os.c::SAVE_CTX_BOTTOM" ref="9250d18ad0a0ff5171eed2dc5f4e18d4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAVE_CTX_BOTTOM          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="os_8c-source.html#l00375">375</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="d70a92eee8278b45f6aad877e23e0d3f"></a><!-- doxytag: member="os.c::SAVE_CTX" ref="d70a92eee8278b45f6aad877e23e0d3f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAVE_CTX          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%">&nbsp;&nbsp;&nbsp;SAVE_CTX_TOP();SAVE_CTX_BOTTOM();</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Push all the registers and SREG onto the stack. 
<p>

<p>
Definition at line <a class="el" href="os_8c-source.html#l00412">412</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="a48fc0927da8c8abbe88e67573b389c9"></a><!-- doxytag: member="os.c::RESTORE_CTX" ref="a48fc0927da8c8abbe88e67573b389c9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RESTORE_CTX          </td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pop all registers and the status register. 
<p>

<p>
Definition at line <a class="el" href="os_8c-source.html#l00417">417</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="e66f6b31b5ad750f1fe042a706a4e3d4"></a><!-- doxytag: member="os.c::main" ref="e66f6b31b5ad750f1fe042a706a4e3d4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
main function provided by user application. The first task to run. 
<p>

</div>
</div><p>
<a class="anchor" name="098a24a5becc67a653b60f01926b2898"></a><!-- doxytag: member="os.c::kernel_main_loop" ref="098a24a5becc67a653b60f01926b2898" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void kernel_main_loop           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The heart of the RTOS, the main loop where the kernel is entered and exited. 
<p>
The complete function is:<p>
Loop <ol>
<li>
Select and dispatch a process to run </li>
<li>
Exit the kernel (The loop is left and re-entered here.) </li>
<li>
Handle the request from the process that was running. </li>
<li>
End loop, go to 1. </li>
</ol>

<p>
Definition at line <a class="el" href="os_8c-source.html#l00141">141</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="e36f6c57ffcef772c6470d9d4ceb025d"></a><!-- doxytag: member="os.c::kernel_dispatch" ref="e36f6c57ffcef772c6470d9d4ceb025d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void kernel_dispatch           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The second part of the scheduler. 
<p>
Chooses the next task to run. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00165">165</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="e51f9c8001c0e6454f7a7c181a7b3245"></a><!-- doxytag: member="os.c::kernel_handle_request" ref="e51f9c8001c0e6454f7a7c181a7b3245" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void kernel_handle_request           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The first part of the scheduler. 
<p>
Perform some action based on the system call or timer tick. Perhaps place the current process in a ready or waitng queue. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00205">205</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="a6b069f80475f50ef2be4a19420c7b47"></a><!-- doxytag: member="os.c::exit_kernel" ref="a6b069f80475f50ef2be4a19420c7b47" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void exit_kernel           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The idle task does nothing but busy loop. 
<p>
This function is called by the kernel. Upon entry, we are using the kernel stack, on top of which is the address of the instruction after the call to <a class="el" href="os_8c.html#a6b069f80475f50ef2be4a19420c7b47">exit_kernel()</a>.<p>
Assumption: Our kernel is executed with interrupts already disabled.<p>
The "naked" attribute prevents the compiler from adding instructions to save and restore register values. It also prevents an automatic return instruction. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00095">95</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="2d87a3737418f0617068390ff7dd1dcf"></a><!-- doxytag: member="os.c::enter_kernel" ref="2d87a3737418f0617068390ff7dd1dcf" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enter_kernel           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
All system calls eventually enter here. 
<p>
Assumption: We are still executing on cur_task's stack. The return address of the caller of <a class="el" href="os_8c.html#2d87a3737418f0617068390ff7dd1dcf">enter_kernel()</a> is on the top of the stack. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00514">514</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="a5bea28826fceb06503c295132d2ac03"></a><!-- doxytag: member="os.c::TIMER1_COMPA_vect" ref="a5bea28826fceb06503c295132d2ac03" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TIMER1_COMPA_vect           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The interrupt handler for output compare interrupts on Timer 1. 
<p>
Used to enter the kernel when a tick expires.<p>
Assumption: We are still executing on the cur_task stack. The return address inside the current task code is on the top of the stack.<p>
The "naked" attribute prevents the compiler from adding instructions to save and restore register values. It also prevents an automatic return instruction. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00561">561</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="ce2fc879e222274a165878f5053a8988"></a><!-- doxytag: member="os.c::kernel_create_task" ref="ce2fc879e222274a165878f5053a8988" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int kernel_create_task           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Kernel function to create a new task. 
<p>
When creating a new task, it is important to initialize its stack just like it has called "enter_kernel()"; so that when we switch to it later, we can just restore its execution context on its stack. <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="os_8c.html#2d87a3737418f0617068390ff7dd1dcf">enter_kernel</a> </dd></dl>

<p>
Definition at line <a class="el" href="os_8c-source.html#l00632">632</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="fb716ddb79e9881c5eba30329f8264c4"></a><!-- doxytag: member="os.c::kernel_terminate_task" ref="fb716ddb79e9881c5eba30329f8264c4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void kernel_terminate_task           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Kernel function to destroy the current task. 
<p>

<p>
Definition at line <a class="el" href="os_8c-source.html#l00755">755</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="09e8daa4fe831768a1dad2d422f37894"></a><!-- doxytag: member="os.c::kernel_event_wait" ref="09e8daa4fe831768a1dad2d422f37894" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void kernel_event_wait           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Kernel function to place current task in a waiting queue. 
<p>

<p>
Definition at line <a class="el" href="os_8c-source.html#l00770">770</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="bd9a901ea488c09d06d6a348b146fe23"></a><!-- doxytag: member="os.c::kernel_event_signal" ref="bd9a901ea488c09d06d6a348b146fe23" args="(uint8_t is_broadcast, uint8_t and_next)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void kernel_event_signal           </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>is_broadcast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>and_next</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Kernel function to signal waiting processes. 
<p>
Handles signals and broadcasts, with or without yielding. May cause current task to be suspended. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00801">801</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="fe6cd6483e8fcf82ae45b1999c5a151d"></a><!-- doxytag: member="os.c::enqueue" ref="fe6cd6483e8fcf82ae45b1999c5a151d" args="(queue_t *queue_ptr, task_descriptor_t *task_to_add)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void enqueue           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structqueue__t.html">queue_t</a> *&nbsp;</td>
          <td class="paramname"> <em>queue_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtd__struct.html">task_descriptor_t</a> *&nbsp;</td>
          <td class="paramname"> <em>task_to_add</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a task the head of the queue. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>queue_ptr</em>&nbsp;</td><td>the queue to insert in </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>task_to_add</em>&nbsp;</td><td>the task descriptor to add </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="os_8c-source.html#l00885">885</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="8243495fd897e6eb3ef8cbe714a1093c"></a><!-- doxytag: member="os.c::dequeue" ref="8243495fd897e6eb3ef8cbe714a1093c" args="(queue_t *queue_ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structtd__struct.html">task_descriptor_t</a>* dequeue           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structqueue__t.html">queue_t</a> *&nbsp;</td>
          <td class="paramname"> <em>queue_ptr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pops head of queue and returns it. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>queue_ptr</em>&nbsp;</td><td>the queue to pop </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the popped task descriptor </dd></dl>

<p>
Definition at line <a class="el" href="os_8c-source.html#l00910">910</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="02d27e5cd408a84f50b1f9ed744cddff"></a><!-- doxytag: member="os.c::kernel_update_ticker" ref="02d27e5cd408a84f50b1f9ed744cddff" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void kernel_update_ticker           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update the current time. 
<p>
Perhaps move to the next time slot of the PPP. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00929">929</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="a12b1f12fa139bad5bf756c84472ef9e"></a><!-- doxytag: member="os.c::check_PPP_names" ref="a12b1f12fa139bad5bf756c84472ef9e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void check_PPP_names           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Validate the PPP array. 
<p>

<p>
Definition at line <a class="el" href="os_8c-source.html#l00971">971</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="280149a9407c6504ce0af541351561db"></a><!-- doxytag: member="os.c::OS_Init" ref="280149a9407c6504ce0af541351561db" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OS_Init           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Setup the RTOS and create <a class="el" href="os_8c.html#e66f6b31b5ad750f1fe042a706a4e3d4">main()</a> as the first SYSTEM level task. 
<p>
Point of entry from the C runtime <a class="el" href="crt0_8S.html">crt0.S</a>. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l01015">1015</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="fef307955fe9d6b19dbbebc25f603bd2"></a><!-- doxytag: member="os.c::_delay_25ms" ref="fef307955fe9d6b19dbbebc25f603bd2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void _delay_25ms           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Delay function adapted from &lt;util/delay.h&gt;. 
<p>

<p>
Definition at line <a class="el" href="os_8c-source.html#l01085">1085</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="b5747390a8be675282cb93e5198bd085"></a><!-- doxytag: member="os.c::OS_Abort" ref="b5747390a8be675282cb93e5198bd085" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OS_Abort           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Abort the execution of this RTOS due to an unrecoverable erorr. 
<p>
Abort the execution of this RTOS due to an unrecoverable erorr. <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="index.html#assumptions">GLOBAL ASSUMPTIONS</a>. </dd></dl>

<p>
Definition at line <a class="el" href="os_8c-source.html#l01096">1096</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="d26f7e7c3185a703e89e97547747b03e"></a><!-- doxytag: member="os.c::Task_Create" ref="d26f7e7c3185a703e89e97547747b03e" args="(void(*f)(void), int arg, unsigned int level, unsigned int name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Task_Create           </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&nbsp;</td>
          <td class="paramname"> <em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>f</em>&nbsp;</td><td>a parameterless function to be created as a process instance </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>an integer argument to be assigned to this process instanace </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>assigned scheduling level: SYSTEM, PERIODIC or RR </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>assigned PERIODIC process name </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if not successful; otherwise non-zero. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="os_8c.html#dc48a5ac983c4656508f39c0ee65283f">Task_GetArg()</a>, <a class="el" href="os_8h.html#9139cb65cf60e47afed151765972c100">PPP</a>[].</dd></dl>
A new process is created to execute the parameterless function <em>f</em> with an initial parameter <em>arg</em>, which is retrieved by a call to <a class="el" href="os_8c.html#dc48a5ac983c4656508f39c0ee65283f">Task_GetArg()</a>. If a new process cannot be created, 0 is returned; otherwise, it returns non-zero. The created process will belong to its scheduling <em>level</em>. If the process is PERIODIC, then its <em>name</em> is a user-specified name to be used in the PPP[] array. Otherwise, <em>name</em> is ignored. <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="index.html#policy">SCHEDULING POLICY</a> </dd></dl>

<p>
Definition at line <a class="el" href="os_8c-source.html#l01177">1177</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="5a9b72d0dadaea32fec8d4ff1c0eafa4"></a><!-- doxytag: member="os.c::Task_Next" ref="5a9b72d0dadaea32fec8d4ff1c0eafa4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Task_Next           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The calling task gives up its share of the processor voluntarily. 
<p>
Voluntarily relinquish the processor. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l01203">1203</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="266ddbe2a3ded7e68eaa0d68a4047387"></a><!-- doxytag: member="os.c::Task_Terminate" ref="266ddbe2a3ded7e68eaa0d68a4047387" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Task_Terminate           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The calling task terminates itself. 
<p>
Terminate the calling process<p>
When a process returns, i.e., it executes its last instruction in the associated function/code, it is automatically terminated. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l01220">1220</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="dc48a5ac983c4656508f39c0ee65283f"></a><!-- doxytag: member="os.c::Task_GetArg" ref="dc48a5ac983c4656508f39c0ee65283f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Task_GetArg           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieve the assigned parameter. 
<p>
Retrieve the assigned parameter. <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="os_8c.html#d26f7e7c3185a703e89e97547747b03e">Task_Create()</a>. </dd></dl>

<p>
Definition at line <a class="el" href="os_8c-source.html#l01236">1236</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="852c4f8ed9198c7c996cc5e9ce7f1f2b"></a><!-- doxytag: member="os.c::Event_Init" ref="852c4f8ed9198c7c996cc5e9ce7f1f2b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a>* Event_Init           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize a new, non-NULL Event descriptor. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a non-NULL Event descriptor if successful; NULL otherwise. </dd></dl>

<p>
Definition at line <a class="el" href="os_8c-source.html#l01256">1256</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="e279428ffa0e59261a01899cea931503"></a><!-- doxytag: member="os.c::Event_Wait" ref="e279428ffa0e59261a01899cea931503" args="(EVENT *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Event_Wait           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Wait for the next occurrence of a signal on <em>e</em>. The calling process always blocks. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>e</em>&nbsp;</td><td>an Event descriptor </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="os_8c-source.html#l01280">1280</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="39210e081be158dab105c68cb85585cd"></a><!-- doxytag: member="os.c::Event_Signal" ref="39210e081be158dab105c68cb85585cd" args="(EVENT *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Event_Signal           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Resume a <b>single</b> waiting task on <em>e</em>. It is a <em>no-op</em> if there is no waiting process. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>e</em>&nbsp;</td><td>an Event descriptor</td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="os_8c.html#e279428ffa0e59261a01899cea931503">Event_Wait()</a> </dd></dl>

<p>
Definition at line <a class="el" href="os_8c-source.html#l01301">1301</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="93f9686857f1f8cc4fe1585df3de4874"></a><!-- doxytag: member="os.c::Event_Broadcast" ref="93f9686857f1f8cc4fe1585df3de4874" args="(EVENT *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Event_Broadcast           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Resume <b>ALL</b> waiting tasks on <em>e</em>. It is a <em>no-op</em> if there is no waiting process. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>e</em>&nbsp;</td><td>an Event descriptor</td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="os_8c.html#e279428ffa0e59261a01899cea931503">Event_Wait()</a> </dd></dl>

<p>
Definition at line <a class="el" href="os_8c-source.html#l01322">1322</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="899044f5840427560c88d0d6e8944629"></a><!-- doxytag: member="os.c::Signal_And_Next" ref="899044f5840427560c88d0d6e8944629" args="(EVENT *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Signal_And_Next           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Resume a waiting task on <em>e</em> and at the same time relinquish the processor. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>e</em>&nbsp;</td><td>an Event descriptor</td></tr>
  </table>
</dl>
This is equivalent to "Event_Signal( e ); Task_Next()" in concept. The fundamental difference is that these two operations are performed as an indivisible unit. So conceptually, the calling task resumes another waiting task and gives up its share of the processor simultaneously. <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="os_8c.html#39210e081be158dab105c68cb85585cd">Event_Signal()</a>, <a class="el" href="os_8c.html#5a9b72d0dadaea32fec8d4ff1c0eafa4">Task_Next()</a> </dd></dl>

<p>
Definition at line <a class="el" href="os_8c-source.html#l01348">1348</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="8530ed5f351b8835f3b060407bd68625"></a><!-- doxytag: member="os.c::Broadcast_And_Next" ref="8530ed5f351b8835f3b060407bd68625" args="(EVENT *e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Broadcast_And_Next           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a> *&nbsp;</td>
          <td class="paramname"> <em>e</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Resume <b>ALL</b> waiting tasks on <em>e</em> and at the same time relinquish the processor. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>e</em>&nbsp;</td><td>an Event descriptor</td></tr>
  </table>
</dl>
This is equivalent to "Event_Broadcast( e ); Task_Next()" in concept. <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="os_8c.html#93f9686857f1f8cc4fe1585df3de4874">Event_Broadcast()</a>, <a class="el" href="os_8c.html#5a9b72d0dadaea32fec8d4ff1c0eafa4">Task_Next()</a> </dd></dl>

<p>
Definition at line <a class="el" href="os_8c-source.html#l01371">1371</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="9139cb65cf60e47afed151765972c100"></a><!-- doxytag: member="os.c::PPP" ref="9139cb65cf60e47afed151765972c100" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned char <a class="el" href="os_8h.html#9139cb65cf60e47afed151765972c100">PPP</a>[]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
PPP and PT defined in user application. 
</div>
</div><p>
<a class="anchor" name="6370d00b2f49ebb4a69edf643003ada2"></a><!-- doxytag: member="os.c::PT" ref="6370d00b2f49ebb4a69edf643003ada2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int <a class="el" href="os_8h.html#6370d00b2f49ebb4a69edf643003ada2">PT</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
PPP and PT defined in user application. 
</div>
</div><p>
<a class="anchor" name="d53910befa64f9fa9ac90742277eb632"></a><!-- doxytag: member="os.c::cur_task" ref="d53910befa64f9fa9ac90742277eb632" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtd__struct.html">task_descriptor_t</a>* <a class="el" href="os_8c.html#d53910befa64f9fa9ac90742277eb632">cur_task</a> = NULL<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The task descriptor of the currently RUNNING task. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00032">32</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="3635891a0df95d8303c390b1fd456d38"></a><!-- doxytag: member="os.c::kernel_sp" ref="3635891a0df95d8303c390b1fd456d38" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint16_t <a class="el" href="os_8c.html#3635891a0df95d8303c390b1fd456d38">kernel_sp</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Since this is a "full-served" model, the kernel is executing using its own stack. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00035">35</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="b1eedd52cbbcef76a30062d2a4feb5af"></a><!-- doxytag: member="os.c::task_desc" ref="b1eedd52cbbcef76a30062d2a4feb5af" args="[MAXPROCESS+1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtd__struct.html">task_descriptor_t</a> <a class="el" href="os_8c.html#b1eedd52cbbcef76a30062d2a4feb5af">task_desc</a>[MAXPROCESS+1]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This table contains all task descriptors, regardless of state, plus idler. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00038">38</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="24065d53ee779976130183b845f205f6"></a><!-- doxytag: member="os.c::idle_task" ref="24065d53ee779976130183b845f205f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtd__struct.html">task_descriptor_t</a>* <a class="el" href="os_8c.html#24065d53ee779976130183b845f205f6">idle_task</a> = &amp;<a class="el" href="os_8c.html#b1eedd52cbbcef76a30062d2a4feb5af">task_desc</a>[MAXPROCESS]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The special "idle task" at the end of the descriptors array. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00041">41</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="3759ee308f2020aedf4d900692d665ab"></a><!-- doxytag: member="os.c::kernel_request" ref="3759ee308f2020aedf4d900692d665ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="kernel_8h.html#e7246a4cf8c61132898e7e1f8bbccdd2">kernel_request_t</a> <a class="el" href="os_8c.html#3759ee308f2020aedf4d900692d665ab">kernel_request</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The current kernel request. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00044">44</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="279e8f10fed5e4683c919a0f8e48fb3c"></a><!-- doxytag: member="os.c::kernel_request_create_args" ref="279e8f10fed5e4683c919a0f8e48fb3c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="structcreate__args__t.html">create_args_t</a> <a class="el" href="os_8c.html#279e8f10fed5e4683c919a0f8e48fb3c">kernel_request_create_args</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Arguments for <a class="el" href="os_8c.html#d26f7e7c3185a703e89e97547747b03e">Task_Create()</a> request. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00047">47</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="cda7cbfa16e2932f4e0b18eb8b5c75fb"></a><!-- doxytag: member="os.c::kernel_request_retval" ref="cda7cbfa16e2932f4e0b18eb8b5c75fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int <a class="el" href="os_8c.html#cda7cbfa16e2932f4e0b18eb8b5c75fb">kernel_request_retval</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return value for <a class="el" href="os_8c.html#d26f7e7c3185a703e89e97547747b03e">Task_Create()</a> request. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00050">50</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="522fa71eb2fa5969150232c9cd94ccd9"></a><!-- doxytag: member="os.c::kernel_request_event_ptr" ref="522fa71eb2fa5969150232c9cd94ccd9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="os_8h.html#a280985b6f47e1541bbf5012bf62c450">EVENT</a>* <a class="el" href="os_8c.html#522fa71eb2fa5969150232c9cd94ccd9">kernel_request_event_ptr</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Argument and return value for Event class of requests. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00053">53</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="903de02b3a408ff431279493daf607e4"></a><!-- doxytag: member="os.c::dead_pool_queue" ref="903de02b3a408ff431279493daf607e4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structqueue__t.html">queue_t</a> <a class="el" href="os_8c.html#903de02b3a408ff431279493daf607e4">dead_pool_queue</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Number of tasks created so far 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00056">56</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="b3dfc0c82749f2167aaf34c0e0216f41"></a><!-- doxytag: member="os.c::num_events_created" ref="b3dfc0c82749f2167aaf34c0e0216f41" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="os_8c.html#b3dfc0c82749f2167aaf34c0e0216f41">num_events_created</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Number of events created so far 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00059">59</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="ebe9cc55f5a66e137a9e4935db8176ad"></a><!-- doxytag: member="os.c::rr_queue" ref="ebe9cc55f5a66e137a9e4935db8176ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structqueue__t.html">queue_t</a> <a class="el" href="os_8c.html#ebe9cc55f5a66e137a9e4935db8176ad">rr_queue</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The ready queue for RR tasks. Their scheduling is round-robin. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00062">62</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="541c08f13ce7088718c32da660763bb7"></a><!-- doxytag: member="os.c::system_queue" ref="541c08f13ce7088718c32da660763bb7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structqueue__t.html">queue_t</a> <a class="el" href="os_8c.html#541c08f13ce7088718c32da660763bb7">system_queue</a><code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The ready queue for SYSTEM tasks. Their scheduling is first come, first served. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00065">65</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="704e958e4af3a92ed5257f96c63b18d6"></a><!-- doxytag: member="os.c::event_queue" ref="704e958e4af3a92ed5257f96c63b18d6" args="[MAXEVENT]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structqueue__t.html">queue_t</a> <a class="el" href="os_8c.html#704e958e4af3a92ed5257f96c63b18d6">event_queue</a>[MAXEVENT]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
An array of queues for tasks waiting on events. 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00068">68</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="a056dcd9e780b161c0bf3c479f9a096a"></a><!-- doxytag: member="os.c::ticks_remaining" ref="a056dcd9e780b161c0bf3c479f9a096a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="os_8c.html#a056dcd9e780b161c0bf3c479f9a096a">ticks_remaining</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
time remaining in current slot 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00071">71</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="66d6e3319239a985804ed1da4043160d"></a><!-- doxytag: member="os.c::slot_task_finished" ref="66d6e3319239a985804ed1da4043160d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="os_8c.html#66d6e3319239a985804ed1da4043160d">slot_task_finished</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indicates if periodic task in this slot has already run this time 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00074">74</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="9917d89ff4b22aa58bdaccd40d82cbc4"></a><!-- doxytag: member="os.c::slot_name_index" ref="9917d89ff4b22aa58bdaccd40d82cbc4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="os_8c.html#9917d89ff4b22aa58bdaccd40d82cbc4">slot_name_index</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Index of name of task in current slot in PPP array. An even number from 0 to 2*(PT-1). 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00077">77</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="2f75d159fcf8aad0c906c4f8d3b42d8b"></a><!-- doxytag: member="os.c::name_to_task_ptr" ref="2f75d159fcf8aad0c906c4f8d3b42d8b" args="[MAXNAME+1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtd__struct.html">task_descriptor_t</a>* <a class="el" href="os_8c.html#2f75d159fcf8aad0c906c4f8d3b42d8b">name_to_task_ptr</a>[MAXNAME+1]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The task descriptor for index "name of task" 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00080">80</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="1053a341fba5dbdf070d86fc9385995c"></a><!-- doxytag: member="os.c::name_in_PPP" ref="1053a341fba5dbdf070d86fc9385995c" args="[MAXNAME+1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="os_8c.html#1053a341fba5dbdf070d86fc9385995c">name_in_PPP</a>[MAXNAME+1]<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The names that appear in PPP 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00083">83</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<a class="anchor" name="05bcfca90a408dadfc62f30b63eeb0b3"></a><!-- doxytag: member="os.c::error_msg" ref="05bcfca90a408dadfc62f30b63eeb0b3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t volatile <a class="el" href="os_8c.html#05bcfca90a408dadfc62f30b63eeb0b3">error_msg</a> = ERR_RUN_1_USER_CALLED_OS_ABORT<code> [static]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Error message used in <a class="el" href="os_8c.html#b5747390a8be675282cb93e5198bd085">OS_Abort()</a> 
<p>
Definition at line <a class="el" href="os_8c-source.html#l00086">86</a> of file <a class="el" href="os_8c-source.html">os.c</a>.
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Tue Oct 23 21:49:51 2007 for RTOS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
