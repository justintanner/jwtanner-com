{{- define "main" -}}
<div class="container-fluid gray-bg">
  <div class="container">
    <div class="row align-items-sm-center py-5">
      <div class="col-sm-6 col-md-5 col-lg-4 order-sm-2 text-center">
        {{- $face2x := .Resources.GetMatch "face10deg.jpg" -}}
        {{- $halfWidth := math.Floor (div $face2x.Width 2) -}}
        {{- $face := $face2x.Resize (printf "%sx" (string $halfWidth)) -}}        
        <div id="face-shadow" class="d-inline-block">
          <img class="img-fluid"
               id="face"
               sizes="(max-width: 576px) {{ $face.Width }}px,
                      (max-width: 768px) {{ (sub $face.Width 64) }}px, 
                      (max-width: 992px) {{ (sub $face.Width 32) }}px, 
                      (max-width: 1200px) {{ (sub $face.Width 16) }}px, 
                      (min-width: 1201px) {{ $face.Width }}px, 
                      {{ $face.Width }}px"
               srcset="{{ $face.RelPermalink }} {{ $face.Width}}w,
                       {{ $face2x.RelPermalink }} {{ $face2x.Width}}w"
               src="{{ $face.RelPermalink }}"               
               alt="A picture of my face">
        </div>
      </div>
      
      <div class="col-sm-6 col-md-5 offset-md-1 col-lg-4 offset-lg-2 order-sm-1 mt-5 mt-md-0">
        <div class="text-center text-sm-start" id="intro">
          <p class="text-uppercase fw-light mb-0">Hi I'm</p>
          <div class="d-inline-block">
            <p class="text-uppercase fw-normal fs-1 lh-2 mb-0" style="position: relative">Justin Tanner</p>
            <div class="d-flex justify-content-between fw-light fs-6 lh-3 mb-4">
              <span>C</span>
              <span>O</span>
              <span>M</span>
              <span>P</span>
              <span>U</span>
              <span>T</span>
              <span>E</span>
              <span>R</span>
              <span>&nbsp;</span>
              <span>P</span>
              <span>R</span>
              <span>O</span>
              <span>G</span>
              <span>R</span>
              <span>A</span>
              <span>M</span>
              <span>M</span>
              <span>E</span>
              <span>R</span>              
            </div>
          </div>
          <div class="d-block"><a href="mailto:hey@jwtanner.com" class="btn btn-dark">Email me &nbsp;{{ partial "svgs/paper-plane.html" }}</a></div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid">
  <h2 class="text-center fw-light py-4">Posts</h2>  
</div>

<div class="container-fluid">
  <div class="container px-0 px-sm-5 px-md-0">

    {{- range (where .Site.RegularPages "Type" "posts") -}}
    {{- $cover := .Resources.GetMatch "cover.jpg" -}}

    <div class="card mb-3 mx-auto" style="max-width: 700px;">
      <div class="row g-0">
        <div class="col-md-4">
          <a href="{{ .RelPermalink }}">
            {{- $cover232 := $cover.Fill "232x148 Center" -}}
            {{- $cover464 := $cover.Fill "464x296 Center" -}}
            {{- $cover508 := $cover.Fill "508x326 Center" -}}                        
            {{- $cover1016 := $cover.Fill "1016x652 Center" -}}

            <img class="img-fluid rounded-start"
                 sizes="(min-width: 768px) 232px, 100vw"
                 srcset="{{ $cover232.RelPermalink }} 232w,
                         {{ $cover464.RelPermalink }} 464w,
                         {{ $cover508.RelPermalink }} 508w,
                         {{ $cover1016.RelPermalink }} 1016w"
                 src="{{ $cover232.RelPermalink }}"                 
                 alt="{{ .Title }}">
          </a>
        </div>
        <div class="col-md-8">
          <div class="card-body p-3">
            <h4 class="fs-5 fw-normal"><a href="{{ .RelPermalink }}" class="text-dark text-decoration-none">{{ .Title }}</a></h4>
            <p class="fw-light fs-6 mb-1">{{ .Description }}</p>
            <p class="mb-0"><a class="text-dark" href="{{ .RelPermalink }}"><small>Read Full Article</small></a></p>
          </div>
        </div>
      </div>
    </div>
    {{- end -}}
  </div>
</div>

<div class="footer mt-auto py-4">
  <div class="d-flex justify-content-center">
    <a href="mailto:hey@jwtanner.com" class="font-weight-bold text-dark text-decoration-none text-no-wrap text-decoration-onhover mx-3">{{ partial "svgs/bi-envelope.html" }} Email</a>
    <a href="https://stackoverflow.com/users/609/justin-tanner" class="font-weight-bold text-dark text-decoration-none text-nowrap text-decoration-onhover mx-3">{{ partial "svgs/bi-stack-overflow.html" }} Stackoverflow</a>
    <a href="https://github.com/justintanner" class="font-weight-bold text-dark text-decoration-none text-nowrap text-decoration-onhover mx-3">{{ partial "svgs/bi-github.html" }} Github</a>
  </div>
</div>
{{- end -}}
