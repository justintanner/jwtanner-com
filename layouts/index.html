{{- define "main" -}}
<div class="container-fluid gray-bg">
  <div class="container">
    <div class="row align-items-sm-center py-5">
      <div class="col-sm-6 col-md-5 col-lg-4 order-sm-2 text-center">
        {{- $face2x := .Resources.GetMatch "profile-pic.png" -}}
        {{- $halfWidth := math.Floor (div $face2x.Width 2) -}}
        {{- $face := $face2x.Resize (printf "%sx" (string $halfWidth)) -}}        
        <img class="img-fluid" src="{{ $face.RelPermalink }}" srcset="{{ $face2x.RelPermalink }} 2x" alt="A picture of my face." width="{{ $face.Width }}" height="{{ $face.Height }}">        
      </div>
      
      <div class="col-sm-6 col-md-5 offset-md-1 col-lg-4 offset-lg-2 order-sm-1 mt-4 mt-sm-0">
        <div class="text-center text-sm-start" id="intro">
          <h3 class="text-uppercase">Hi I'm</h3>
          <h1 class="text-uppercase">Justin Tanner</h1>
          <h2 class="text-uppercase mb-4">Computer Programmer</h2>
          <a href="mailto:hey@jwtanner.com" class="btn btn-dark font-montserrat">Email me &nbsp;{{ partial "svgs/paper-plane.html" }}</a>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid">
  <h2 class="text-center font-montserrat py-4">Posts</h2>  
</div>

<div class="container-fluid">
  <div class="container">

    {{- range (where .Site.RegularPages "Type" "posts") -}}
    {{- $cover := .Resources.GetMatch "cover.jpg" -}}

    <div class="card mb-3 mx-auto" style="max-width: 700px;">
      <div class="row g-0">
        <div class="col-md-4">
          <a href="{{ .RelPermalink }}">
            {{- $coverThumb2x := $cover.Fill "464x296 Center" -}}
            {{- $coverThumb := $cover.Fill "232x148 Center" -}}
            <img class="img-fluid rounded-start d-none d-md-block" src="{{ $coverThumb.RelPermalink }}" srcset="{{ $coverThumb2x.RelPermalink }} 2x" class="" alt="{{ .Title }}" width="{{ $coverThumb.Width }}" height="{{ $coverThumb.Height }}">
            
            {{- $coverMobile2x := $cover.Fill "1536x496 Center" -}}
            {{- $coverMobile := $cover.Fill "768x248 Center" -}}              
            <img class="img-fluid rounded-start d-block d-md-none" src="{{ $coverMobile.RelPermalink }}" srcset="{{ $coverMobile2x.RelPermalink }} 2x" class="" alt="{{ .Title }}" width="{{ $coverMobile.Width }}" height="{{ $coverMobile.Height }}">
          </a>
        </div>
        <div class="col-md-8">
          <div class="card-body p-3">
            <h4 class="fs-5 fw-normal"><a href="{{ .RelPermalink }}" class="text-dark text-decoration-none">{{ .Title }}</a></h4>
            <p class="fw-light fs-6 mb-1">{{ .Description }}</p>
            <p class="mb-0"><a class="text-dark" href="{{ .RelPermalink }}"><small>Read Full Article</small></a></p>
          </div>
        </div>
      </div>
    </div>
    {{- end -}}
  </div>
</div>

<div class="footer mt-auto py-4">
  <div class="d-flex justify-content-center">
    <a href="mailto:hey@jwtanner.com" class="font-weight-bold text-dark text-decoration-none text-no-wrap text-decoration-onhover mx-3">{{ partial "svgs/bi-envelope.html" }} Email</a>
    <a href="https://stackoverflow.com/users/609/justin-tanner" class="font-weight-bold text-dark text-decoration-none text-nowrap text-decoration-onhover mx-3">{{ partial "svgs/bi-stack-overflow.html" }} Stackoverflow</a>
    <a href="https://github.com/justintanner" class="font-weight-bold text-dark text-decoration-none text-nowrap text-decoration-onhover mx-3">{{ partial "svgs/bi-github.html" }} Github</a>
  </div>
</div>
{{- end -}}
